<script type="text/javascript">
  $(document).ready(function() {
  $("#trendPlotCategoryMenu li span").html("<%= session[:category] || 'All' %>");
  $("#trendPlotCategoryField").html("<%= session[:category] || 'All' %>");
  $("#trendPlotPeriodField").val("<%= session[:period] || 'month' %>");
  $("#trendPlotStartDateField").val("<%= session[:trendStartDate] || (Date.today.beginning_of_month-1.year).strftime('%B %d, %Y') %>");
  $("#trendPlotEndDateField").val("<%= session[:trendEndDate] || Date.today.strftime('%B %d, %Y') %>");

  $("#trendPlotStartDateField").datepicker({ dateFormat: "MM dd, yy" });
  $("#trendPlotEndDateField").datepicker({ dateFormat: "MM dd, yy" });
  
  $("ul#trendPlotCategoryMenu.menu").on("click", "li ul li a", function() {
  
	 $("ul#trendPlotCategoryMenu.menu li span").text($(this).text());
	 $("#trendPlotCategoryField").val($(this).text());
  });


  
$.plot($("#trendPlotArea"), [
    {
     color: "orange",
     data: <%= @report.y_data %>,
     bars: {show: true, barWidth: 0.7, align: "center", fill: 0.6}, 
    }
  ],

  {
  xaxis :{
  ticks: <%= raw(@report.ticks) %>,
  min: 0,
  max: <%= @report.x_data.count+1 %>,
  
  },

  
  }

  );

  });
</script>



<div id="trendPlotDiv" style="background:#FFF">
  <div id="trendPlotTitle"><%= @report.title %></div>
  <div id="trendPlotArea" style="height:400px; "></div>
</div>

<div id="trendPlotFilter">
  <%= render "filter" %>
</div>

